document.addEventListener("DOMContentLoaded",(function(){let t=document.getElementById("org-div-home-and-up");const e=document.getElementById("table-of-contents"),n=document.getElementById("TOC-link");let o=window.scrollY;if(e){var i=e.cloneNode(!0);i.id="floating-toc",i.style.display="none";i.querySelector("div").id="text-floating-TOC",document.body.appendChild(i)}function r(){if(t){const e=t.offsetHeight,n=document.querySelector("main, #content, .content, body > div:first-child");if(n){const t=parseInt(window.getComputedStyle(n).marginTop)||0,o=Math.max(t,e+10);n.style.marginTop=o+"px"}else{const t=parseInt(window.getComputedStyle(document.body).marginTop)||0,n=Math.max(t,e+10);document.body.style.marginTop=n+"px"}}}n.addEventListener("click",(function(t){t.preventDefault(),i.style.display="none"===i.style.display?"block":"none"})),i.addEventListener("click",(function(t){"A"===t.target.tagName&&(i.style.display="none")})),document.addEventListener("click",(function(t){"block"!==i.style.display||i.contains(t.target)||t.target===n||(i.style.display="none")})),setTimeout(r,100),window.addEventListener("scroll",(function(){const e=window.scrollY;t.style.top=e>o?"-10rem":"0",o=e})),window.addEventListener("resize",(function(){setTimeout(r,100)}));const s=document.createElement("div");s.style.cssText="\n\tposition: absolute;\n\tbackground-color: #f4f5f6;\n\tpadding: 0.625rem;\n\tborder-radius: 0.3125rem;\n\tbox-shadow: 0 2px 5px rgba(0,0,0,0.2);\n\tdisplay: none;\n\tz-index: 1000;\n\tmax-width: 24rem;\n\tfont-size: 100%;\n\tline-height: 1.5;\n  ",document.body.appendChild(s);const l=document.querySelectorAll("a.footref"),a=document.getElementById("footnotes");a&&l.forEach((t=>{const e=t.getAttribute("href").substring(1),n=Array.from(a.querySelectorAll("div.footdef")).find((t=>null!==t.querySelector(`a.footnum[id="${e}"]`)));n&&n.closest(".footdef").querySelector("p.footpara");if(n){const e=n.querySelector("p.footpara");e&&(t.addEventListener("mouseover",(t=>{const n=t.target.getBoundingClientRect();s.innerHTML=e.innerHTML,s.style.left=`${n.right+10}px`,s.style.top=`${window.scrollY+n.top}px`,s.style.display="block"})),t.addEventListener("mouseout",(()=>{s.style.display="none"})))}})),["scroll","resize"].forEach((t=>{window.addEventListener(t,(()=>{s.style.display="none"}))}));const c=document.getElementById("theme-link"),d=document.documentElement;let p=localStorage.getItem("theme")||"auto";function u(t){d.classList.remove("light-mode","dark-mode"),"dark"===t?(d.classList.add("dark-mode"),c.textContent="LIGHT",localStorage.setItem("theme","dark"),s.style.backgroundColor="#222222",s.style.color="#F4F5F6"):"light"===t?(d.classList.add("light-mode"),c.textContent="DARK",localStorage.setItem("theme","light"),s.style.backgroundColor="#f9f9f9",s.style.color="black"):(c.textContent="DARK",localStorage.removeItem("theme"),s.style.backgroundColor="#222222",s.style.color="#F4F5F6")}c.addEventListener("click",(t=>{t.preventDefault(),p="dark"===p?"light":"dark",u(p)})),u(p),document.addEventListener("keydown",(function(t){t.ctrlKey||t.altKey||t.metaKey||"INPUT"!==t.target.tagName&&"TEXTAREA"!==t.target.tagName&&"SELECT"!==t.target.tagName&&("c"===t.key.toLowerCase()?i&&(i.style.display="none"===i.style.display?"block":"none"):"d"===t.key.toLowerCase()&&(p="dark"===p?"light":"dark",u(p)))}));const y=document.createElement("div");y.className="image-overlay",y.style.cssText="\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: rgba(0, 0, 0, 0.6); /* Less dark background */\n\tdisplay: none;\n\tjustify-content: center;\n\talign-items: center;\n\tz-index: 1000;\n\toverflow: hidden;\n  ";const g=document.createElement("div");g.className="overlay-img-container",g.style.cssText="\n\tposition: relative;\n\tmax-width: 90%;\n\tmax-height: 90%;\n\toverflow: visible;\n  ";const m=document.createElement("img");m.className="overlay-img",m.src="/images/1x1-transparent-pixel.png",m.style.cssText="\n\tmax-width: 100%;\n\tmax-height: 80vh; /* Reduced to leave room for caption */\n\tcursor: grab;\n\ttransition: transform 0.2s ease;\n  ";const f=document.createElement("div");f.className="caption-container",f.style.cssText="\n\tposition: absolute;\n\ttop: 100%; // Display captions directly below images\n\tleft: 0;\n\tright: 0;\n\tbackground-color: rgba(0, 0, 0, 0.6);\n\tcolor: white;\n\tpadding: 10px;\n\ttext-align: center;\n\tfont-size: 36px;\n  ";const b=document.createElement("div");b.className="image-counter",b.style.cssText="\n\tposition: fixed;\n\ttop: 20px;\n\tleft: 20px;\n\tbackground-color: rgba(0, 0, 0, 0.6);\n\tcolor: white;\n\tpadding: 5px 10px;\n\tborder-radius: 3px;\n\tfont-size: 36px;\n\tz-index: 1010;\n  ";const x=document.createElement("div");x.className="close-button",x.innerHTML="&#10005;",x.style.cssText="\n\tposition: fixed;\n\ttop: 20px;\n\tright: 20px;\n\tbackground-color: rgba(0, 0, 0, 0.6);\n\tcolor: white;\n\twidth: 50px;\n\theight: 50px;\n\tborder-radius: 50%;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tcursor: pointer;\n\tfont-size: 36px;\n\tz-index: 1010;\n\ttransition: background-color 0.3s;\n  ",x.onmouseover=()=>x.style.backgroundColor="rgba(0, 0, 0, 0.8)",x.onmouseout=()=>x.style.backgroundColor="rgba(0, 0, 0, 0.6)";const h=document.createElement("div");h.className="help-button",h.innerHTML="?",h.style.cssText="\n\tposition: fixed;\n\tbottom: 20px;\n\tleft: 20px;\n\tbackground-color: rgba(0, 0, 0, 0.6);\n\tcolor: white;\n\twidth: 50px;\n\theight: 50px;\n\tborder-radius: 50%;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tcursor: pointer;\n\tfont-size: 36px;\n\tz-index: 1010;\n\ttransition: background-color 0.3s;\n  ";const v=document.createElement("div");v.className="help-tooltip",v.style.cssText="\n\tposition: absolute;\n\tbottom: 60px;\n\tleft: 0;\n\tbackground-color: rgba(0, 0, 0, 0.8);\n\tcolor: white;\n\tpadding: 10px;\n\tborder-radius: 5px;\n\twidth: 400px;\n\tfont-size: 30px;\n\tline-height: 1.5;\n\topacity: 0;\n\tvisibility: hidden;\n\ttransition: opacity 0.3s, visibility 0.3s;\n\ttext-align: left;\n  ",v.innerHTML="\n\t<strong>Keyboard Shortcuts:</strong><br>\n\t← / → : Prev/Next image<br>\n\tSpace : Reset size/position<br>\n\tESC : Close viewer<br>\n\tc : Show TOC<br>\n\td : Dark/Light Mode<br>\n\t<strong>Tip:</strong> On narrow screens, rotate device for better image viewing.\n  ";const k=document.createElement("div");k.className="nav-arrow prev",k.innerHTML="&#10094;",k.style.cssText="\n\tposition: fixed;\n\tbottom: 20px;\n\tleft: 90px;\n\tbackground-color: rgba(0, 0, 0, 0.6);\n\tcolor: white;\n\twidth: 50px;\n\theight: 50px;\n\tborder-radius: 50%;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tcursor: pointer;\n\tfont-size: 36px;\n\tz-index: 1010;\n\ttransition: background-color 0.3s;\n\tuser-select: none;\n  ",k.onmouseover=()=>k.style.backgroundColor="rgba(0, 0, 0, 0.8)",k.onmouseout=()=>k.style.backgroundColor="rgba(0, 0, 0, 0.6)";const w=document.createElement("div");w.className="nav-arrow next",w.innerHTML="&#10095;",w.style.cssText="\n\tposition: fixed;\n\tbottom: 20px;\n\tleft: 150px;\n\tbackground-color: rgba(0, 0, 0, 0.6);\n\tcolor: white;\n\twidth: 50px;\n\theight: 50px;\n\tborder-radius: 50%;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tcursor: pointer;\n\tfont-size: 36px;\n\tz-index: 1010;\n\ttransition: background-color 0.3s;\n\tuser-select: none;\n  ",w.onmouseover=()=>w.style.backgroundColor="rgba(0, 0, 0, 0.8)",w.onmouseout=()=>w.style.backgroundColor="rgba(0, 0, 0, 0.6)",h.addEventListener("mouseenter",(function(){v.style.opacity="1",v.style.visibility="visible",h.style.backgroundColor="rgba(0, 0, 0, 0.8)"})),h.addEventListener("mouseleave",(function(){v.style.opacity="0",v.style.visibility="hidden",h.style.backgroundColor="rgba(0, 0, 0, 0.6)"})),h.appendChild(v),g.appendChild(m),g.appendChild(f),y.appendChild(g),y.appendChild(k),y.appendChild(w),y.appendChild(b),y.appendChild(x),y.appendChild(h),document.body.appendChild(y);const E=document.createElement("style");E.innerHTML="\n\t.zoom-cursor {\n\t  cursor: zoom-in;\n\t}\n  ",document.head.appendChild(E);let C=[],L=0,T=1,z=0,S=0;function N(){const t=Array.from(document.querySelectorAll("img:not(.overlay-img)"));t.forEach(((t,e)=>{t.dataset.galleryInitialized||(t.addEventListener("click",(function(){!function(t){L=t,I(L),y.style.display="flex",A()}(Array.from(document.querySelectorAll("img:not(.overlay-img)")).filter((t=>"true"===t.dataset.galleryInitialized)).indexOf(t))})),t.addEventListener("mouseenter",(function(){if(t.style.cursor="zoom-in",!t.galleryTooltip){const e=document.createElement("div");e.className="gallery-tooltip-temp",e.textContent="Click to enlarge",e.style.cssText="\n\t\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\t\tbackground-color: rgba(0, 0, 0, 0.7);\n\t\t\t\t\t\t\tcolor: white;\n\t\t\t\t\t\t\tpadding: 5px 10px;\n\t\t\t\t\t\t\tborder-radius: 3px;\n\t\t\t\t\t\t\tfont-size: 12px;\n\t\t\t\t\t\t\tpointer-events: none;\n\t\t\t\t\t\t\tz-index: 1000;\n\t\t\t\t\t\t\topacity: 0;\n\t\t\t\t\t\t\ttransition: opacity 0.3s ease;\n\t\t\t\t\t\t",document.body.appendChild(e),t.galleryTooltip=e}const e=t.getBoundingClientRect(),n=t.galleryTooltip;n.style.left=e.left+e.width/2-n.offsetWidth/2+"px",n.style.top=e.bottom-30+"px",n.style.opacity="1"})),t.addEventListener("mouseleave",(function(){t.style.cursor="",t.galleryTooltip&&(t.galleryTooltip.style.opacity="0")})),t.addEventListener("DOMNodeRemoved",(function(){t.galleryTooltip&&t.galleryTooltip.remove()})),t.dataset.galleryInitialized="true")})),C=t.filter((t=>"true"===t.dataset.galleryInitialized))}function I(t){if(0===C.length)return;L=(t+C.length)%C.length;const e=C[L];m.src=e.src,m.alt=e.alt;const n=function(t){return!(!t.src||!t.src.toLowerCase().endsWith(".svg"))||"image/svg+xml"===t.getAttribute("type")}(e);n?function(t){!t.src||!t.src.toLowerCase().endsWith(".svg")||(m.style.objectFit="contain")}(e):m.style.objectFit="";const o=function(t){const e=function(t,e){for(;t&&t.tagName!==e.toUpperCase();)t=t.parentElement;return t}(t,"figure");if(e){const t=e.querySelector("figcaption");if(t)return t.innerHTML}return t.alt||""}(e);f.innerHTML=o,f.style.display=o?"block":"none",b.textContent=`${L+1} of ${C.length}`,C.length<=1?(k.style.display="none",w.style.display="none"):(k.style.display="flex",w.style.display="flex")}function A(){T=1,z=0,S=0,m.style.transform=`translate(${z}px, ${S}px) scale(${T})`}function M(){I(L-1),A()}function H(){I(L+1),A()}function q(){y.style.display="none"}k.addEventListener("click",M),w.addEventListener("click",H),x.addEventListener("click",q),y.addEventListener("click",(function(t){t.target===y&&q()})),document.addEventListener("keydown",(function(t){if("none"!==y.style.display)switch(t.key){case"ArrowLeft":M();break;case"ArrowRight":H();break;case"Escape":q();break;case" ":t.preventDefault(),A()}})),N();new MutationObserver((function(t){t.forEach((function(t){"childList"===t.type&&N()}))})).observe(document.body,{childList:!0,subtree:!0})}));
