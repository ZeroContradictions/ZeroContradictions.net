---
permalink: /404
---
<!DOCTYPE HTML>
<html lang="en">
<head>
<title>Zero Contradictions 404 Page</title>
<style media="screen">
html {background-color: black;}
body {
	font-family: Arial, Helvetica, sans-serif;
	color: black;
	background-color: #E9ECF5;
	text-align: center;
	margin: 0 auto;
	padding: 3%;
	max-width: 47.25em;
}
h1 {
	border-top: solid black 0.1em;
	padding-top: 0.5em;
	font-size: 3.0em;
}
p {font-size: 1.2em;}
a {color: #015EF4;}
</style>
<script>
/**
 * Extracts a search term from the URL
 * @param {string} url - The current URL path
 * @return {string} The extracted search term
 */
function getSearchTermFromUrl(url) {
	// Remove leading and trailing slashes
	const cleanUrl = url.replace(/^\/|\/$/g, '');

	// Split by slashes to get path segments
	const segments = cleanUrl.split('/');

	// Use the last segment as the search term
	let searchTerm = segments[segments.length - 1];

	// Replace dashes/underscores with spaces, decode URI components
	searchTerm = decodeURIComponent(searchTerm).replace(/[-_]/g, ' ');

	return searchTerm;
}

async function fetchSitemapUrls() {
	try {
		const response = await fetch('/sitemap.xml');
		const text = await response.text();
		const parser = new DOMParser();
		const xmlDoc = parser.parseFromString(text, 'text/xml');
		return Array.from(xmlDoc.getElementsByTagName('loc')).map(loc => loc.textContent);
	} catch (error) {
		console.error('Error fetching sitemap:', error);
		return [];
	}
}

async function fetchPDFs() {
	try {
		const response = await fetch('/pdfs/'); // Assuming directory listing is enabled
		const text = await response.text();
		const parser = new DOMParser();
		const htmlDoc = parser.parseFromString(text, 'text/html');
		return Array.from(htmlDoc.querySelectorAll('a[href$=".pdf"]')).map(a => a.href);
	} catch (error) {
		console.error('Error fetching PDFs:', error);
		return [];
	}
}

async function fetchImages() {
	try {
		const response = await fetch('/images/'); // Assuming directory listing is enabled
		const text = await response.text();
		const parser = new DOMParser();
		const htmlDoc = parser.parseFromString(text, 'text/html');
		return Array.from(htmlDoc.querySelectorAll('a[href$=""]')).map(a => a.href);
	} catch (error) {
		console.error('Error fetching Images:', error);
		return [];
	}
}

/**
 * Finds relevant url suggestions based on the search term
 * @param {string} inputUrl - The term to search for
 * @param {Array} urls - Array of url objects with path and title
 * @param {short} urls - Maximum limit for URL suggestions to display
 * @return {Array} Array of matching url objects
 */
function getClosestMatches(inputUrl, urls, limit = 5) {
	if (!inputUrl) return [];

	// Convert input URL to lowercase for case-insensitive matching
	const term = inputUrl.toLowerCase();

	// Score each url based on relevance to search term
	const scoredUrls = urls.map(url => {
		const pathLower = url.path.toLowerCase();
		const titleLower = url.title.toLowerCase();

		// Calculate match score (basic algorithm)
		let score = 0;

		// Exact matches in path get highest score
		if (pathLower.includes(term)) {
			score += 10;
			// Higher score for exact segment match
			if (pathLower.split('/').some(segment => segment === term)) {
				score += 5;
			}
		}

		// Matches in title
		if (titleLower.includes(term)) {
			score += 8;
			// Higher score for exact word match
			if (titleLower.split(' ').some(word => word === term)) {
				score += 4;
			}
		}

		// Individual word matches
		const words = term.split(' ');
		words.forEach(word => {
			if (word.length < 3) return; // Skip very short words

			if (pathLower.includes(word)) {
				score += 2;
			}

			if (titleLower.includes(word)) {
				score += 3;
			}
		});

		return { ...url, score };
	});

	// Filter URLs with a score and sort by score (descending)
	return scoredUrls
		.filter(url => url.score > 0)
		.sort((a, b) => b.score - a.score)
		.slice(0, 5); // Return top 5 suggestions
}

async function suggestPages() {
	const currentUrl = window.location.pathname;
	const searchTerm = getSearchTermFromUrl(currentUrl);

	const sitemapUrls = await fetchSitemapUrls();
	const pdfUrls = await fetchPDFs();
	const imageUrls = await fetchImages();
	const allUrls = [...sitemapUrls, ...pdfUrls, ...imageUrls];

	const suggestions = getClosestMatches(currentUrl, allUrls);

	const suggestionBox = document.getElementById('suggestions');
	if (suggestions.length > 0) {
		suggestionBox.innerHTML = '<p>Did you mean:</p><ul>' +
			suggestions.map(s => `<li><a href="${s.url}">${s.url}</a></li>`).join('') +
			'</ul>';
	} else {
		suggestionBox.innerHTML = `
			<p>Sorry, we couldn't find any pages related to the given search terms.</p>
			<p>Please check our <a href="/sitemap">sitemap</a> or use the navigation menu above.</p>
			`;
	}
}

document.addEventListener('DOMContentLoaded', suggestPages);
</script>
</head>
<body>
<h1>404</h1>
<p>The requested page could not be found :(
<br><br>You may be able to find the sought page on the <a href="https://zerocontradictions.net/directory">directory page</a>.
<br><br>If you believe this is a broken link, please <a href="https://zerocontradictions.net/misc/contact">notify the website administrator</a>.</p>
</body>
</html>
